<!-- Interlinear Words Display - Optimized for TV screens -->
<div id="interlinear-words" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 lg:gap-4 mt-6 lg:mt-8">
  <%
    # Use passed settings or fallback to defaults
    settings ||= {
      'show_greek' => true,
      'show_spanish' => true,
      'show_strongs' => true,
      'show_grammar' => true,
      'show_pronunciation' => false,
      'show_word_order' => false
    }
  %>
  <% words.each_with_index do |word, word_index| %>
    <div class="interlinear-word group bg-gray-700 hover:bg-blue-600 rounded-lg p-3 lg:p-4 text-center transition-all duration-300 cursor-pointer transform hover:scale-105 hover:shadow-lg border border-gray-600 hover:border-blue-400 min-h-[120px] flex flex-col justify-between"
         <% if word.strong_number.present? %>
           title="<%= t('tv.strongs_help') %>"
           tabindex="0"
         <% else %>
           title="<%= t('messages.no_data') %>"
         <% end %>>

      <!-- Greek Word -->
      <% if settings['show_greek'] %>
        <div class="greek-word mb-2 lg:mb-3 flex-1 flex items-center justify-center">
          <% if word.greek_word.present? %>
            <% if word.strong_number.present? %>
              <%= link_to strong_definition_path(word.strong_number),
                  class: "block text-sm lg:text-lg xl:text-xl 2xl:text-2xl font-medium text-sky-300 leading-tight hover:text-sky-200 transition-colors duration-200 break-words hyphens-auto",
                  data: { turbo_frame: "strong-definition-modal" },
                  title: "Ver definición Strong's" do %>
                <%= word.greek_word %>
              <% end %>
            <% else %>
              <span class="block text-sm lg:text-lg xl:text-xl 2xl:text-2xl font-medium text-sky-300 leading-tight break-words hyphens-auto">
                <%= word.greek_word %>
              </span>
            <% end %>
          <% else %>
            <span class="block text-sm lg:text-lg xl:text-xl 2xl:text-2xl font-medium text-gray-400 leading-tight">—</span>
          <% end %>
        </div>
      <% end %>

      <!-- Spanish Translation -->
      <% if settings['show_spanish'] %>
        <div class="spanish-word mb-2 lg:mb-3 flex-1 flex items-center justify-center">
          <% if word.spanish_translation.present? %>
            <span class="block text-sm lg:text-base xl:text-lg 2xl:text-xl font-normal text-white leading-tight break-words hyphens-auto">
              <%= word.spanish_translation %>
            </span>
          <% else %>
            <span class="block text-sm lg:text-base xl:text-lg 2xl:text-xl font-normal text-gray-400 leading-tight">—</span>
          <% end %>
        </div>
      <% end %>

      <!-- Strong's Number and Grammar -->
      <div class="metadata space-y-1 mt-auto">
        <% if settings['show_strongs'] && word.strong_number.present? %>
          <div class="strong-number">
            <span class="inline-block bg-yellow-600 text-yellow-100 text-xs lg:text-sm font-semibold px-2 py-1 rounded-md leading-none">
              G<%= word.strong_number %>
            </span>
          </div>
        <% end %>

        <% if settings['show_grammar'] && word.greek_grammar.present? %>
          <div class="grammar">
            <span class="inline-block bg-gray-600 text-gray-200 text-xs lg:text-sm font-normal px-2 py-1 rounded-md leading-none">
              <%= word.greek_grammar.truncate(10) %>
            </span>
          </div>
        <% end %>

        <% if settings['show_pronunciation'] && word.strong&.pronunciation.present? %>
          <div class="pronunciation">
            <span class="inline-block bg-purple-600 text-purple-100 text-xs lg:text-sm font-normal px-2 py-1 rounded-md leading-none">
              /<%= word.strong.pronunciation %>/
            </span>
          </div>
        <% end %>
      </div>

      <!-- Word Order -->
      <% if settings['show_word_order'] %>
        <div class="word-order mt-2 lg:mt-3">
          <span class="text-xs text-gray-500 font-mono">
            #<%= word.word_order %>
          </span>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<!-- Empty state if no words -->
<% if words.empty? %>
  <div class="text-center py-12 lg:py-16">
    <div class="text-gray-400 text-lg lg:text-2xl">
      <p class="mb-4"><%= t('messages.no_interlinear') %></p>
      <p class="text-base lg:text-xl"><%= t('messages.spanish_only') %></p>
    </div>
  </div>
<% end %>

<style>
  /* Additional TV-optimized styling */
  .interlinear-word:focus {
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
  }

  /* Flexible word box sizing */
  .interlinear-word {
    min-width: 120px;
    max-width: 300px;
    width: 100%;
  }

  /* Responsive grid adjustments */
  @media (min-width: 640px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
  }

  @media (min-width: 768px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    }
  }

  @media (min-width: 1024px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
  }

  @media (min-width: 1280px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
  }

  @media (min-width: 1536px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
  }

  @media (min-width: 1920px) {
    .greek-word span {
      font-size: 1.75rem;
    }
    .spanish-word span {
      font-size: 1.5rem;
    }
    .strong-number span,
    .grammar span {
      font-size: 1rem;
    }
  }

  @media (max-width: 768px) {
    .interlinear-word {
      min-height: 100px;
    }
  }

  /* High contrast mode for better TV visibility */
  @media (prefers-contrast: high) {
    .interlinear-word {
      border-width: 2px;
      border-color: #ffffff;
    }
    .greek-word span {
      color: #ffffff;
      font-weight: 600;
    }
    .spanish-word span {
      color: #ffffff;
      font-weight: 500;
    }
  }

  /* Word wrapping for long Greek words */
  .greek-word span,
  .spanish-word span {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  /* Additional responsive improvements */
  @media (max-width: 480px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.5rem;
    }
    
    .interlinear-word {
      min-height: 80px;
      padding: 0.5rem;
    }
    
    .greek-word span {
      font-size: 0.875rem;
    }
    
    .spanish-word span {
      font-size: 0.75rem;
    }
  }

  /* Ultra-wide screen support */
  @media (min-width: 2560px) {
    #interlinear-words {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2.5rem;
    }
    
    .greek-word span {
      font-size: 2rem;
    }
    
    .spanish-word span {
      font-size: 1.75rem;
    }
  }

  /* Better word box sizing for very long words */
  .interlinear-word {
    min-width: 120px;
    max-width: 350px;
    width: 100%;
    height: auto;
    min-height: 120px;
  }

  /* Ensure text doesn't overflow */
  .greek-word,
  .spanish-word {
    max-width: 100%;
    overflow: hidden;
  }
</style>
